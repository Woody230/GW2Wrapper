paths:
  /guild/{guildId}/teams:
    get:
      tags: [ getModel ]
      operationId: getGuildTeams
      security:
        - Bearer: [ account,guilds ]
      x-gw2-guild-scopes: [ leader ]
      externalDocs:
        url: https://wiki.guildwars2.com/wiki/API:2/guild/:id/teams
      parameters:
        - $ref: "#/components/parameters/GuildId"
      responses:
        "200":
          description: This resource returns information about the teams in a guild. The endpoint requires the scope guilds, and will only work if the API key is from the guild leader's account.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/GuildTeam"
              example: '[{"id":1,"members":[{"name":"Lawton.9413","role":"Captain"},{"name":"NotLawton.3149","role":"Member"}],"name":"1v1 Me Bro","aggregate":{"wins":3,"losses":0,"desertions":0,"byes":0,"forfeits":0},"ladders":{"unranked":{"wins":3,"losses":0,"desertions":0,"byes":0,"forfeits":0}},"games":[{"id":"98EBE4DC-E36B-4A6C-A38C-A5B898AF53A4","map_id":549,"started":"2015-08-29T13:42:45.000Z","ended":"2015-08-29T13:53:49.000Z","result":"Victory","team":"Blue","scores":{"red":344,"blue":500},"rating_type":"Ranked"}],"seasons":[{"id":"44B85826-B5ED-4890-8C77-82DDF9F2CF2B","wins":1,"losses":0,"rating":1437}]}]'
components:
  schemas:
    GuildTeamId:
      type: integer
      description: The id of the team unique to this guild only.
      x-ktx-id: true

    GuildTeam:
      type: object
      required: [ id, members, name, aggregate, ladders, games, seasons ]
      properties:
        id:
          $ref: "#/components/schemas/GuildTeamId"
        members:
          type: array
          items:
            $ref: "#/components/schemas/GuildTeamMember"
        name:
          type: string
        aggregate:
          allOf:
            - $ref: "#/components/schemas/PvpStatAggregate"
            - title: totalAggregate
              description: The total count of wins and losses.
        ladders:
          type: object
          description: The ladder types mapped to an aggregate.
          x-key:
            $ref: "#/components/schemas/PvpLadderType"
          additionalProperties:
            $ref: "#/components/schemas/PvpStatAggregate"
        games:
          # TODO profession omitted: BasePvpGame, PvpGame, GuildPvpGame
          type: array
          description: The games. The profession will be omitted.
          items:
            $ref: "#/components/schemas/PvpGame"
        seasons:
          type: array
          items:
            $ref: "#/components/schemas/GuildTeamSeason"

    GuildTeamMember:
      type: object
      required: [ name,role ]
      properties:
        name:
          type: string
        role:
          $ref: "#/components/schemas/TeamMemberRole"

    GuildTeamSeason:
      type: object
      required: [ id,wins,losses,rating ]
      properties:
        id:
          $ref: "#/components/schemas/PvpSeasonId"
        wins:
          type: integer
        losses:
          type: integer
        rating:
          type: integer
